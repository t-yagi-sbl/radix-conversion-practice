<!DOCTYPE html>
<html>
<head>
  <title>åŸºæ•°å¤‰æ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</title>
ã€€<meta charset="utf-8">
  <style>
    body {
		font-family: sans-serif;
		padding: 20px;
		max-width: 600px;
		margin: 0 auto;
		background:#0E0E0E;
		color: aliceblue;
	  }
    input, button {
		padding: 5px;
		margin-top: 10px;
	  }
    #stats { 
		margin-top: 20px;
	  }
    table { 
		border-collapse: collapse;
		width: 100%;
		margin-top: 10px;
	  }
    th, td {
		border: 1px solid #ccc;
		padding: 5px;
		text-align: center; 
	  }
	  .statscount{
		  display: inline-block;
		  margin-right: 30px;
	  }
	  button{
		  display: flex;
		  align-items: center;
		  justify-content: center;
		  
	  }

  </style>
</head>
<body>
	<h1>åŸºæ•°å¤‰æ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</h1>
	<div class="content">
		<div id="question"></div>

		<input type="text" id="answer" placeholder="ç­”ãˆã‚’å…¥åŠ›">
		<button onclick="checkAnswer()">ç­”ãˆã‚‹</button>
	</div>
	<div id="result"></div>

	<div id="stats">
	  <p class="statscount">âœ… æ­£è§£æ•°: <span id="correct">0</span></p>
	  <p class="statscount">âŒ ä¸æ­£è§£æ•°: <span id="incorrect">0</span></p>

	  <h3>å¤‰æ›ã”ã¨ã®å¹³å‡å›ç­”æ™‚é–“</h3>
	  <table>
		<thead>
		  <tr><th>å¤‰æ›</th><th>å›æ•°</th><th>å¹³å‡æ™‚é–“ï¼ˆç§’ï¼‰</th></tr>
		</thead>
		<tbody id="timeStats">
		</tbody>
	  </table>
	</div>

	<script>
	  const bases = [2, 8, 10, 16];
	  let fromBase, toBase, number, correctAnswer;
	  let correctCount = 0, incorrectCount = 0;
	  let startTime;

	  const timeData = {}; // e.g. {"2â†’10": { count: 3, totalTime: 15 }}

	  function generateQuestion() {
		do {
		  fromBase = bases[Math.floor(Math.random() * bases.length)];
		  toBase = bases[Math.floor(Math.random() * bases.length)];
		} while (fromBase === toBase);

		number = Math.floor(Math.random() * 255) + 1;
		const displayNum = number.toString(fromBase).toUpperCase();
		correctAnswer = number.toString(toBase).toUpperCase();

		document.getElementById("question").textContent =
		  `å¤‰æ›ã›ã‚ˆï¼š${displayNum}ï¼ˆåŸºæ•° ${fromBase}ï¼‰â†’ åŸºæ•° ${toBase}`;
		document.getElementById("result").textContent = "";
		document.getElementById("answer").value = "";
		startTime = Date.now();
	  }

	  function checkAnswer() {
		const userAns = document.getElementById("answer").value.trim().toUpperCase();
		const timeTaken = (Date.now() - startTime) / 1000; // ç§’

		const key = `${fromBase}â†’${toBase}`;
		if (!timeData[key]) timeData[key] = { count: 0, totalTime: 0 };
		timeData[key].count += 1;
		timeData[key].totalTime += timeTaken;

		if (userAns === correctAnswer) {
		  correctCount++;
		  document.getElementById("result").textContent = `æ­£è§£ï¼ğŸ‰ (${timeTaken.toFixed(2)} ç§’)`;
		  document.getElementById("result").style.color = "green";
		} else {
		  incorrectCount++;
		  document.getElementById("result").textContent =
			`ä¸æ­£è§£ ğŸ˜¢ æ­£è§£ã¯ ${correctAnswer}ï¼ˆ${timeTaken.toFixed(2)} ç§’ï¼‰`;
		  document.getElementById("result").style.color = "red";
		}

		updateStats();
		setTimeout(generateQuestion, 1000);
	  }

	  function updateStats() {
		document.getElementById("correct").textContent = correctCount;
		document.getElementById("incorrect").textContent = incorrectCount;

		const tbody = document.getElementById("timeStats");
		tbody.innerHTML = "";
		for (const key in timeData) {
		  const { count, totalTime } = timeData[key];
		  const avg = (totalTime / count).toFixed(2);
		  const row = `<tr><td>${key}</td><td>${count}</td><td>${avg}</td></tr>`;
		  tbody.innerHTML += row;
		}
	  }

	  generateQuestion();
		
	ã€€function checkAnswer() {
	  const userAns = document.getElementById("answer").value.trim().toUpperCase();
	  const timeTaken = (Date.now() - startTime) / 1000; // ç§’

	  const key = `${fromBase}â†’${toBase}`;
	  if (!timeData[key]) timeData[key] = { count: 0, totalTime: 0 };

	  if (userAns === correctAnswer) {
		// æ­£è§£å‡¦ç†
		correctCount++;
		timeData[key].count += 1;
		timeData[key].totalTime += timeTaken;

		document.getElementById("result").textContent = `æ­£è§£ï¼ğŸ‰ (${timeTaken.toFixed(2)} ç§’)`;
		document.getElementById("result").style.color = "green";
		updateStats();

		setTimeout(generateQuestion, 1000); // 1ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸
	  } else {
		// ä¸æ­£è§£å‡¦ç†ï¼ˆå•é¡Œã¯ãã®ã¾ã¾ï¼‰
		incorrectCount++;
		document.getElementById("result").textContent = `ä¸æ­£è§£ã§ã™ ğŸ˜¢`;
		document.getElementById("result").style.color = "red";
		updateStats();
		// æ¬¡ã®å•é¡Œã«ã¯é€²ã¾ãªã„
	  }
	 }

	</script>

</body>
</html>
